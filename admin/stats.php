<?php
$url = "https://bot-dashboard1.herokuapp.com/stats.json";
$json = file_get_contents($url);
$obj = json_decode($json, true);

$uptime = $obj["uptime"];
$ram = $obj["ram"];
$ping = $obj["ping"];
$guilds = $obj["guilds"];
$users = $obj["users"];
$commands = $obj["commands"];
$upday = $obj['upday'];
$uphour = $obj['uphour'];
$upmin = $obj['upmin'];
?>
<html>
<head>
<style>
h1,h2,h,h4,h5,h6,p {
font-family: 'PT Sans', sans-serif;
}
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  max-width: 300px;
  margin: auto;
  text-align: center;
  font-family: arial;
background-color: black;
color: white;
}

.price {
  color: grey;
  font-size: 22px;
}

.card button {
  border: none;
  outline: 0;
  padding: 12px;
  color: black;
  background-color: #fffff;
  text-align: center;
  cursor: pointer;
  width: 100%;
  font-size: 18px;
}

.card a:hover {
  opacity: 0.7;
}

.block{
display: inline-block;
}

body{
background: rgb(238,174,202);
background: radial-gradient(circle, rgba(238,174,202,1) 0%, rgba(148,187,233,1) 100%);
}
</style>
<script language="JavaScript" src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
function success(title, description){
Swal.fire(
  title,
  description,
  'success'
)
}

function uptime() {
  Swal.fire({
  title: '<strong>Bot Uptime</strong>',
  icon: 'info',
  html:
    'Bot has been alive for <b><?php echo $upday . " Days, " . $uphour . " Hours, " . $upmin . " Minutes.";?></b>',
  showClosea: true,
  showCancela: false,
  focusConfirm: false,
  confirmaText:
    'Close',
  confirmaAriaLabel: 'Close'
})
}

function memory() {
  Swal.fire({
  title: '<strong>RAM Usage</strong>',
  icon: 'info',
  html:
    'Bot has used <b><?php echo $ram; ?>MB</b>',
  showClosea: true,
  showCancela: false,
  focusConfirm: false,
  confirmaText:
    'Close',
  confirmaAriaLabel: 'Close'
})
}

function latency() {
  Swal.fire({
  title: '<strong>Bot Latency</strong>',
  icon: 'info',
  html:
    "The bot's current latency is <b><?php $ping; ?>ms</b>",
  showClosea: true,
  showCancela: false,
  focusConfirm: false,
  confirmaText:
    'Close',
  confirmaAriaLabel: 'Close'
})
}

function guilds() {
  Swal.fire({
  title: '<strong>Guild Count</strong>',
  icon: 'info',
  html:
    "Bot is currently in <b><?php echo $guilds; ?></b> Guilds",
  showClosea: true,
  showCancela: false,
  focusConfirm: false,
  confirmaText:
    'Close',
  confirmaAriaLabel: 'Close'
})
}

function users() {
  Swal.fire({
  title: '<strong>User Count</strong>',
  icon: 'info',
  html:
    "<b><?php echo $users; ?></b> Users have been identified.",
  showClosea: true,
  showCancela: false,
  focusConfirm: false,
  confirmaText:
    'Close',
  confirmaAriaLabel: 'Close'
})
}

function commands() {
  Swal.fire({
  title: '<strong>Command Usage</strong>',
  icon: 'info',
  html:
    "A total of <b><?php echo $commands; ?></b> Commands have been ran.",
  showClosea: true,
  showCancela: false,
  focusConfirm: false,
  confirmaText:
    'Close',
  confirmaAriaLabel: 'Close'
})
}

function refresh(){
const delay = ms => new Promise(res => setTimeout(res, ms * 1000))
delay(60).then(() => {
window.location.reload();
    })
}
</script>
</head>
<body>
<h2 style="text-align:center">Bot Stats</h2>
<div class="block">
<div class="card">
  <h1>Uptime</h1>
  <p class="price"><?php echo $uptime;?></p>
  <p>How long your bot has been alive for.</p>
  <button onclick="uptime()">More Info</button>
</div>
</div>
<div class="block">
<div class="card">
  <h1>RAM Usage</h1>
  <p class="price"><?php echo $ping;?>MB</p>
  <p>The current amount of RAM being used.</p>
  <button onclick="memory()">More Info</button>
</div>
</div>
<div class="block">
<div class="card">
  <h1>Ping</h1>
  <p class="price"><?php echo $ping;?></p>
  <p>Time it takes to comunicate to Discord API.</p>
  <button onclick="latency()">More Info</button>
</div>
</div>
<div class="block">
<div class="card">
  <h1>Guilds</h1>
  <p class="price"><?php echo $guilds;?></p>
  <p>Total amount of servers your bot is in.</p>
  <button onclick="guilds()">More Info</button>
</div>
</div>
<div class="block">
<div class="card">
  <h1>Users</h1>
  <p class="price"><?php echo $users;?></p>
  <p>Total amount of members with access to the bot.</p>
  <button onclick="users()">More Info</button>
</div>
</div>
<div class="block">
<div class="card">
  <h1>Commands Ran</h1>
  <p class="price"><?php echo $commands;?></p>
  <p>Total number of bot commands that have been ran.</p>
  <button onclick="commands()">More Info</button>
</div>
</div>
</body>
</html>
